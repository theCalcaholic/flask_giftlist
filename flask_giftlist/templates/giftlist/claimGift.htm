{% extends 'master.htm' %}
{% block header %}
<h1>Geschenk reservieren</h1>
{% endblock %}
{% block content %}
<main ng-app='giftFormApp' ng-controller='GiftFormController'
    ng-init="gifts = [{ id: {{ gift.id }} }];">
    <p class='info'>
        Hier sind noch einmal alle Informationen zu dem Geschenk aufgeführt. Nach Bestätigung wird außerdem noch eine E-Mail gleichen Inhalts an die angegebene E-Mail-Adresse versendet.
    </p>
        <dl class='gift'>
            <div class='gift-content'>
                <dt>
                    {%if gift.image %}
                    <img class='gift-image' src='{{ gift.image }}' />
                    {% endif %}
                    <p class='gift-name'>
                        {{ gift.name }}
                    </p>
                </dt>
                <dd>
                    <p class='gift-prize'>
                        Preis: {{ gift.prize }}€
                    </p>
                    <p class='gift-description'>
                        Beschreibung: {{ gift.description }}
                    </p>
                    <p class='gift-url'>
                        URL:
                        <a href='{{ gift.url }}'>
                            {{ gift.url }}
                        </a>
                    </p>
                </dd> 
            </div>
            {% if gift.mail_text %}
            <p class='gift-mail-text'>
                {{ gift.mail_text }}
            </p>
            {% endif %}
        </dl>
    <ul id='credentialsList'>
        <label for='credentialsList'>Sind diese Informationen korrekt?</label>
        <li>
        <dl>
            <dt>Vorname:</dt>
            <dd>{{ gift_form.surname.data }}</dd>
        </dl>
        </li>
        <li>
        <dl>
            <dt>Nachname:</dt>
            <dd>{{ gift_form.name.data }}</dd>
        </dl>
        </li>
        <li>
        <dl>
            <dt>E-Mail-Adresse:</dt>
            <dd>{{ gift_form.email.data }}</dd>
        </dl>
        </li>
        <li>
            <input type='submit' value='bearbeiten' ng-click='callGiftForm(0);'>
        </li>
    </ul>
    <div id='claim-form_container'> 
        <form action='' method='post' target=_self name='giftForm' ng-show='giftForm.show' ng-init="gifter = {
        surname: '{{ gift_form.surname.data }}',
        name: '{{ gift_form.name.data }}',
        email: '{{ gift_form.email.data }}'
        };">
                {% include 'giftlist/claimGiftFormFields.htm' %}
            <p>
                <input ng-model='claimConfirmed' name="claimConfirmed" type="checkbox" ng-init="claimConfirmed = false;"/>
                <label for="confirmationCheckbox">Ich möchte das Geschenk "{{ gift.name }}" reservieren.</label>
            </p>
            <p>
                <input type="submit" value="Senden" disabled ng-disabled="!claimConfirmed" />
            </p>
        </form>
    </div>
</main>

{% endblock %}
{% block footer %}
    <script src="{{ url_for('static', filename='js/giftFormApp.js') }}"></script>
    <script src="{{ url_for('static', filename='js/controllers/giftFormController.js') }}"></script>
{% endblock %}
