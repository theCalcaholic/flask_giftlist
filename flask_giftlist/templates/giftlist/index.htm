{% extends 'master.htm' %}
{% block header %}
    <h1>Gabentisch zur Hochzeit von Henrike und Tobias</h1>
    {% if logged_in %}
    <a id='logout-button' href='{{ url_for('users.logout') }}'>Log out</a>
    {% endif %}
{% endblock %}
{% block content %}
<main 
    ng-app='giftFormApp' 
    ng-controller='GiftFormController' 
    ng-init="gifts = [
        {% for gift in gifts %}
            {
                id: '{{ gift.id }}',
                name: '{{ gift.name }}',
                prize: '{{ gift.prize }}',
                url: '{{ gift.url }}',
                description: '{{ gift.description }}',
                {% if gift.image %}
                image: '{{ gift.image }}',
                {% else %}
                image: null,
                {% endif %}
                mailText: '{{ gift.mail_text }}'
            },
        {% endfor %}
        ];">
{% include 'giftlist/gifts.htm' %}


{% if logged_in %}
    <div class='add-gift-button_container'>
        <input 
            value='Neues Geschenk'
            ng-click="callGiftForm('new');" 
            type='submit' 
            class='add-gift_button' />
    </div>
{% endif %}

{% include 'giftlist/giftForm.htm' %}

</main>
{% endblock %}
{% block footer %}
    <script src="{{ url_for('static', filename='js/giftFormApp.js') }}"></script>
    <script src="{{ url_for('static', filename='js/controllers/giftFormController.js') }}"></script>
    <script type='application/javascript'>
    var initGiftListController = function(scope) {
    };
    </script>
{% endblock %}
