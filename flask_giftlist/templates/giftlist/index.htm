{% extends 'master.htm' %}
{% block header %}
    <h1>Gabentisch zur Hochzeit von Henrike und Tobias</h1>
    {% if logged_in %}
    <a id='logout-button' href='{{ url_for('users.logout') }}'>Log out</a>
    {% endif %}
{% endblock %}
{% block content %}
<main ng-app='giftFormApp' ng-controller='GiftFormController' 
{% if request.method == 'POST' %}
    ng-init='showGiftForm()'
{% endif %}>
{#% if logged_in %}
    <div class='navlink'>
        <a href='{{ url_for('giftlist_admin.show_lists') }}'>Geschenklisten bearbeiten</a>
    </div>
{% endif %#}
{% include 'giftlist/gifts.htm' %}


{% if logged_in %}
    <div class='add-gift-button_container'>
            <input 
                value='Neues Geschenk'
                ng-click="callGiftForm(null, $event);" 
                type='submit' 
                class='add-gift_button' />
    </div>
{% endif %}

    <form 
        id='gift_form' 
        {% if logged_in %}
            class="edit-gift_form" 
            enctype='multipart/form-data'
        {% endif %}
        method='post' 
        action='{{ '{{' }} action {{ '}}' }}' 
        style='display:{{ '{{' }} giftFormDisplay {{ '}}' }};'>
        <fieldset id='gift-form_fields'>
            <div class='options'>
                <div class='close-button' title="schlieÃŸen" ng-click='closeGiftForm()'>
                </div>
            </div>
            {% if logged_in %}
                {% include 'giftlist/renderEditGiftForm.htm' %}
            {% else %}
                {% include 'giftlist/renderClaimForm.htm' %}
            {% endif %}
        </fieldset>
    </form>

</main>
{% endblock %}
{% block footer %}
    <script src="{{ url_for('static', filename='js/giftFormApp.js') }}"></script>
    <script src="{{ url_for('static', filename='js/controllers/giftFormController.js') }}"></script>
{% endblock %}
