{% extends 'master.htm' %}
{% block header %}
    <h1>Gabentisch zur Hochzeit von Henrike und Tobias</h1>
{% endblock %}
{% block content %}
<main ng-app='giftFormApp' ng-controller='GiftFormController' 
{% if request.method == 'POST' %}
    ng-init='showGiftForm()'
{% endif %}>
{#% if logged_in %}
    <div class='navlink'>
        <a href='{{ url_for('giftlist_admin.show_lists') }}'>Geschenklisten bearbeiten</a>
    </div>
{% endif %#}
{% include 'giftlist/public/gifts.htm' %}

    <form 
        id='gift_form' 
        {% if logged_in %}
            class="edit-gift_form" 
            enctype='multipart/form-data'
        {% endif %}
        method='post' 
        {% if logged_in %}
            action='{{ '{{' }} "gift/" + selectedGift.id + "/" {{ '}}' }}' 
        {% else %}
            action='{{ url_for('.claim_gift') }}' 
        {% endif %}
        style='display:{{ '{{' }} giftFormDisplay {{ '}}' }};'
        ng-click="closeGiftForm();">
        <fieldset id='gift-form_fields'>
            <div class='options'>
                <div class='close-button' title="schlieÃŸen" ng-click='closeGiftForm()'>
                </div>
            </div>
            {% if logged_in %}
                {% include 'giftlist/admin/renderEditGiftForm.htm' %}
            {% else %}
                {% include 'giftlist/public/renderClaimForm.htm' %}
            {% endif %}
        </fieldset>
    </form>

</main>
{% endblock %}
{% block footer %}
    <script src="{{ url_for('static', filename='js/giftFormApp.js') }}"></script>
    <script src="{{ url_for('static', filename='js/controllers/giftFormController.js') }}"></script>
{% endblock %}
